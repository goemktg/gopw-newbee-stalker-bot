const processKillmail = require('../index.js');

const testDataNewbeeKill = '{"package":{"killID":115300759,"killmail":{"attackers":[{"alliance_id":1354830081,"character_id":96386549,"corporation_id":98127387,"damage_done":781,"final_blow":true,"security_status":0.7,"ship_type_id":22456,"weapon_type_id":2873},{"damage_done":677,"faction_id":500025,"final_blow":false,"security_status":0,"ship_type_id":56487},{"alliance_id":1354830081,"character_id":2117332550,"corporation_id":98127387,"damage_done":0,"final_blow":false,"security_status":5,"ship_type_id":11971,"weapon_type_id":15891},{"alliance_id":1354830081,"character_id":849398062,"corporation_id":1184675423,"damage_done":0,"final_blow":false,"security_status":-3.9,"ship_type_id":12005,"weapon_type_id":8787}],"killmail_id":115300759,"killmail_time":"2024-02-04T13:56:12Z","solar_system_id":30010141,"victim":{"character_id":2115063481,"corporation_id":1000168,"damage_taken":1458,"items":[{"flag":21,"item_type_id":4435,"quantity_dropped":1,"singleton":0},{"flag":28,"item_type_id":25861,"quantity_destroyed":1,"singleton":0},{"flag":93,"item_type_id":31083,"quantity_destroyed":1,"singleton":0},{"flag":94,"item_type_id":31083,"quantity_destroyed":1,"singleton":0},{"flag":20,"item_type_id":4787,"quantity_destroyed":1,"singleton":0},{"flag":27,"item_type_id":25861,"quantity_dropped":1,"singleton":0},{"flag":12,"item_type_id":1405,"quantity_dropped":1,"singleton":0},{"flag":11,"item_type_id":1405,"quantity_dropped":1,"singleton":0},{"flag":19,"item_type_id":5971,"quantity_destroyed":1,"singleton":0},{"flag":22,"item_type_id":4435,"quantity_destroyed":1,"singleton":0},{"flag":92,"item_type_id":31083,"quantity_destroyed":1,"singleton":0}],"position":{"x":1350386210487.598,"y":593752195559.764,"z":-2115859845036.3835},"ship_type_id":605}},"zkb":{"locationID":40342224,"hash":"be06f284a81f8d6362e37240e8eb38e4860046f1","fittedValue":3160995.33,"droppedValue":909752,"destroyedValue":2251243.33,"totalValue":3160995.33,"points":1,"npc":false,"solo":false,"awox":false,"labels":["cat:6","#:2+","pvp","loc:nullsec"],"href":"https://esi.evetech.net/v1/killmails/115300759/be06f284a81f8d6362e37240e8eb38e4860046f1/"}}}';
const testDataNewbeeLost = '{"package":{"killID":115300759,"killmail":{"attackers":[{"alliance_id":1354830081,"character_id":96386549,"corporation_id":98127387,"damage_done":781,"final_blow":true,"security_status":0.7,"ship_type_id":22456,"weapon_type_id":2873},{"damage_done":677,"faction_id":500025,"final_blow":false,"security_status":0,"ship_type_id":56487},{"alliance_id":1354830081,"character_id":2117332550,"corporation_id":98127387,"damage_done":0,"final_blow":false,"security_status":5,"ship_type_id":11971,"weapon_type_id":15891},{"alliance_id":1354830081,"character_id":849398062,"corporation_id":1184675423,"damage_done":0,"final_blow":false,"security_status":-3.9,"ship_type_id":12005,"weapon_type_id":8787}],"killmail_id":115300759,"killmail_time":"2024-02-04T13:56:12Z","solar_system_id":30010141,"victim":{"character_id":96386549,"corporation_id":1000168,"damage_taken":1458,"items":[{"flag":21,"item_type_id":4435,"quantity_dropped":1,"singleton":0},{"flag":28,"item_type_id":25861,"quantity_destroyed":1,"singleton":0},{"flag":93,"item_type_id":31083,"quantity_destroyed":1,"singleton":0},{"flag":94,"item_type_id":31083,"quantity_destroyed":1,"singleton":0},{"flag":20,"item_type_id":4787,"quantity_destroyed":1,"singleton":0},{"flag":27,"item_type_id":25861,"quantity_dropped":1,"singleton":0},{"flag":12,"item_type_id":1405,"quantity_dropped":1,"singleton":0},{"flag":11,"item_type_id":1405,"quantity_dropped":1,"singleton":0},{"flag":19,"item_type_id":5971,"quantity_destroyed":1,"singleton":0},{"flag":22,"item_type_id":4435,"quantity_destroyed":1,"singleton":0},{"flag":92,"item_type_id":31083,"quantity_destroyed":1,"singleton":0}],"position":{"x":1350386210487.598,"y":593752195559.764,"z":-2115859845036.3835},"ship_type_id":605}},"zkb":{"locationID":40342224,"hash":"be06f284a81f8d6362e37240e8eb38e4860046f1","fittedValue":3160995.33,"droppedValue":909752,"destroyedValue":2251243.33,"totalValue":3160995.33,"points":1,"npc":false,"solo":false,"awox":false,"labels":["cat:6","#:2+","pvp","loc:nullsec"],"href":"https://esi.evetech.net/v1/killmails/115300759/be06f284a81f8d6362e37240e8eb38e4860046f1/"}}}';
const testDataOldbeeKill = '{"package":{"killID":115300759,"killmail":{"attackers":[{"alliance_id":99010412,"character_id":95768685,"corporation_id":98127387,"damage_done":781,"final_blow":true,"security_status":0.7,"ship_type_id":22456,"weapon_type_id":2873},{"damage_done":677,"faction_id":500025,"final_blow":false,"security_status":0,"ship_type_id":56487},{"alliance_id":1354830081,"character_id":2117332550,"corporation_id":98127387,"damage_done":0,"final_blow":false,"security_status":5,"ship_type_id":11971,"weapon_type_id":15891},{"alliance_id":1354830081,"character_id":849398062,"corporation_id":1184675423,"damage_done":0,"final_blow":false,"security_status":-3.9,"ship_type_id":12005,"weapon_type_id":8787}],"killmail_id":115300759,"killmail_time":"2024-02-04T13:56:12Z","solar_system_id":30010141,"victim":{"character_id":2115063481,"corporation_id":1000168,"damage_taken":1458,"items":[{"flag":21,"item_type_id":4435,"quantity_dropped":1,"singleton":0},{"flag":28,"item_type_id":25861,"quantity_destroyed":1,"singleton":0},{"flag":93,"item_type_id":31083,"quantity_destroyed":1,"singleton":0},{"flag":94,"item_type_id":31083,"quantity_destroyed":1,"singleton":0},{"flag":20,"item_type_id":4787,"quantity_destroyed":1,"singleton":0},{"flag":27,"item_type_id":25861,"quantity_dropped":1,"singleton":0},{"flag":12,"item_type_id":1405,"quantity_dropped":1,"singleton":0},{"flag":11,"item_type_id":1405,"quantity_dropped":1,"singleton":0},{"flag":19,"item_type_id":5971,"quantity_destroyed":1,"singleton":0},{"flag":22,"item_type_id":4435,"quantity_destroyed":1,"singleton":0},{"flag":92,"item_type_id":31083,"quantity_destroyed":1,"singleton":0}],"position":{"x":1350386210487.598,"y":593752195559.764,"z":-2115859845036.3835},"ship_type_id":605}},"zkb":{"locationID":40342224,"hash":"be06f284a81f8d6362e37240e8eb38e4860046f1","fittedValue":3160995.33,"droppedValue":909752,"destroyedValue":2251243.33,"totalValue":1234567891011.33,"points":1,"npc":false,"solo":false,"awox":false,"labels":["cat:6","#:2+","pvp","loc:nullsec"],"href":"https://esi.evetech.net/v1/killmails/115300759/be06f284a81f8d6362e37240e8eb38e4860046f1/"}}}';

new Promise((resolve) => {
	setTimeout(() => {
		resolve();
	}, 5000);
},
)
	.then(() => processKillmail(testDataNewbeeKill))
	.then(() => processKillmail(testDataNewbeeLost))
	.then(() => processKillmail(testDataOldbeeKill))
	.then(() => process.exit());